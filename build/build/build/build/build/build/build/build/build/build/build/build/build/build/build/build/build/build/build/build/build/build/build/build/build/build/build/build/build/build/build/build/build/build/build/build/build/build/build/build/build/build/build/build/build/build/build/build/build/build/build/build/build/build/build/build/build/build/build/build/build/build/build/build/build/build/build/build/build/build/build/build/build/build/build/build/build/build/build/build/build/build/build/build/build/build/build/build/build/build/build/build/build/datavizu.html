<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Gaspar, José, Rémi" />


<title>Nouvelles fonctionnalités dans les périphériques graphiques de R</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Finist'R 2021</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="https://github.com/StateOfTheR/finistR2021">
    <span class="fa fa-github"></span>
     
    
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="instructions.html">
    <span class="fa fa-gear"></span>
     
    Workflow
  </a>
</li>
<li>
  <a href="datavizu.html">
    <span class="fa fa-desktop"></span>
     
    Nouvelles Fonctions Graphiques
  </a>
</li>
<li>
  <a href="deepnote.html">
    <span class="fa fa-user-graduate"></span>
     
    Enseignement
  </a>
</li>
<li>
  <a href="webpages.html">
    <span class="fa fa-address-book-o"></span>
     
    Site Web
  </a>
</li>
<li>
  <a href="xarigan_flipbook.html">
    <span class="fa fa-slideshare"></span>
     
    Présentations
  </a>
</li>
<li>
  <a href="shiny.html">Shiny</a>
</li>
<li>
  <a href="test-unitaires.html">
    <span class="fa fa-box-open"></span>
     
    Package et tests
  </a>
</li>
<li>
  <a href="openmp.html">OpenMP</a>
</li>
<li>
  <a href="parallelisme.html">
    <span class="fa fa-box-open"></span>
     
    CalculMemoParal
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Nouvelles fonctionnalités dans les périphériques graphiques de R</h1>
<h4 class="author">Gaspar, José, Rémi</h4>
<h4 class="date">23/08/2020</h4>

</div>


<div id="nouvelles-fonctionnalités-dans-les-périphériques-graphiques-de-r" class="section level2">
<h2>Nouvelles fonctionnalités dans les périphériques graphiques de R</h2>
<p>Depuis R 4.1.0, les périphériques graphiques de R facilitent l’utilisation de gradients (linéaires, circulaires, avec des motifs), ainsi que du masquage (masking) et du rognage (clipping), et ce particulièrement à travers le package <code>grid</code>. Un compte rendu plus poussé est disponible <a href="https://www.stat.auckland.ac.nz/~paul/Reports/GraphicsEngine/definitions/definitions.html">ici</a> et une présentation <a href="https://www.stat.auckland.ac.nz/~paul/Talks/useR2021/index.html">ici</a></p>
<p>On peut donc maintenant à l’aide de fonctions de <code>grid</code> comme <code>linearGradient</code> ou <code>radialGradient</code> produire des gradients :</p>
<div class="figure">
<img src="figs/datavizu_lineargradient.png" alt="" />
<p class="caption">Gradient Linéaire</p>
</div>
<div class="figure">
<img src="figs/datavizu_radialgradient.png" alt="" />
<p class="caption">Gradient Radial</p>
</div>
</div>
<div id="intérêt-des-nouvelles-fonctionnalités" class="section level2">
<h2>Intérêt des nouvelles fonctionnalités</h2>
<p>Les nouvelles fonctionnalités permettent le développement de nouveaux types de graphiques qui peuvent maintenant se baser sur la grammaire de <code>grid</code>. Ça concerne des packages comme <code>riverplot</code> par exemple qui pourront mobiliser ces fonctionnalités, qui auparavant étaient bricolée à l’extérieure de <code>grid.</code></p>
<div class="figure">
<img src="figs/datavizu_riverplot.png" alt="" />
<p class="caption">Exemple de Riverplot</p>
</div>
<p>Ces différents éléments (ainsi que l’ensemble des fonctionnalités de <code>grid</code>) peuvent par ailleurs être combinées avec les fonctionnalités de <code>ggplot</code> avec l’utilisation du package <code>gggrid</code>. Un rapport sur ce sujet est disponible <a href="https://www.stat.auckland.ac.nz/~paul/Reports/gggrid/gggrid.html">ici</a>. <code>gggrid</code> combiné avec les nouvelles fonctionnalités de gradients, clip et mask peut permettre la réalisation du graphique ci-dessous:</p>
<div class="figure">
<img src="figs/datavizu_ggrid.png" alt="" />
<p class="caption">Plot possible avec <code>gggrid</code></p>
</div>
<p>À noter que les nouvelles fonctionnalités (gradients, clip, mask) ne sont pas disponible pour tous les périphériques graphiques (graphic devices). Elles ne sont notamment pas disponible pour les périphériques standard de Windows et Mac : <code>windows()</code> et <code>quartz()</code>. <code>pdf()</code> devrait fonctionner correctement.</p>
<p>À terme l’intérêt doit être de pouvoir réaliser des graphiques complexes basés sur les fonctionnalités de <code>grid</code> comme par exemple la carte ci-dessous qui implique un clip complexe des lignes des niveaux par le contours des îles :</p>
<div class="figure">
<img src="figs/datavizu_nz_clip.png" alt="" />
<p class="caption">Carte de la Nouvelle Zélande, potentiellement possible à réaliser avec <code>grid</code> à terme.</p>
</div>
</div>
<div id="le-package-sf-et-son-intégration-dans-ggplot-avec-geom_sf." class="section level2">
<h2>Le package <code>sf</code> et son intégration dans <code>ggplot</code> avec <code>geom_sf</code>.</h2>
<p>Ces différentes fonctionnalités et en particulier les clips complexes présentés avec la carte de la Nouvelle Zélande sont en fait déjà possible à réaliser avec des objets spatiaux et leurs opérations. Le package <code>sf</code> a remplacé récemment le package <code>sp</code> et propose des méthodes efficaces et compatibles avec le <code>tidyverse</code> pour gérer des objets spatiaux et réaliser des opérations d’intersection (clip) ou de mask (ou tout autre opération spatiale). Une introduction à <code>sf</code> et à la réalisation de graphiques spatiaux (y compris interactifs avec <code>leaflet</code>) est disponible <a href="https://statnmap.com/2018-07-14-introduction-to-mapping-with-sf-and-co/">ici</a>.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
